<!doctype html>
<!--
http://html5.by/blog/audio/
http://webaudiodemos.appspot.com/AudioRecorder/index.html
https://truongtx.me/2014/08/09/record-and-export-audio-video-files-in-browser-using-web-audio-api/
http://www.doboism.com/blog/2013/10/17/web-audio-api-browser-support/
https://github.com/mattdiamond/Recorderjs

http://stackoverflow.com/questions/23924642/best-way-to-send-web-audio-api-stream-to-server-side-java-for-processing
https://github.com/soareschen/web-audio-upload/blob/master/page.html
-->
<html>
    <head>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Audio Recorder</title>
        <!-- 
                <script src="voiceinput/recorder.js"></script>
                <script src="voiceinput/main.js"></script>
        -->
    <style type="text/css">
        #analyser{
            background-color:gray;
        }
    </style>
    </head>
    <body>
        <div>
            <canvas id="canvas-indicator1" width="100" height="40"></canvas>
            <input  type="button" value="on 1" data-audio-id="indicator1" class="recButton">
            <input  type="button" value="off 1" data-audio-id="indicator1" class="stopButton">
            <span class="audio-config" id="config-indicator1" data-string="First string"></span>
        </div>
        <div>
            <canvas id="canvas-indicator2" width="100" height="40"></canvas>
            <input  type="button" value="on 2" data-audio-id="indicator2" class="recButton">
            <input  type="button" value="off 2" data-audio-id="indicator2" class="stopButton">
            <span class="audio-config" id="config-indicator2" data-string="Second string"></span>
        </div>
        <script type="application/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script type="application/javascript" src="voiceinput/voiceinput.js"></script>
        <script type="application/javascript" src="voiceinput/voiceinputRecorder.js"></script>
        <script type="application/javascript" src="voiceinput/voiceinputRecorderWorker.js"></script>
        <script type="application/javascript">
            var tutor = {inputs: {}};
            
            $(document).on('audioapi:activated', function () {
                $(".recButton").click(tutor.inputs.audioapi.startRecording);
                $(".stopButton").click(tutor.inputs.audioapi.stopRecording);
            });
            $(document).on('audioapi:score', function (event,reply) {
                console.log(reply);
            });


            $(window).load(initAudioApi);
            
        </script>
    </body>
</html>